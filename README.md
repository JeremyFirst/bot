# Discord Bot для Rust сервера через RCON

Discord бот на Python с автоматическим подключением к Rust серверу через RCON.

## Установка

1. Установите Python 3.8 или выше

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Настройка

1. Получите токен Discord бота:
   - Перейдите на https://discord.com/developers/applications
   - Создайте новое приложение или выберите существующее
   - В разделе "Bot" скопируйте токен

2. Создайте файл `.env` в корневой директории проекта:
   ```bash
   # Скопируйте пример файла
   cp .env.example .env
   ```
   
   Или создайте файл `.env` вручную со следующим содержимым:
   ```
   DISCORD_TOKEN=ваш_токен_дискорд_бота
   RCON_HOST=212.232.75.180
   RCON_PORT=27025
   RCON_PASSWORD=7gj-2R4-k32-6Uk
   RCON_TIMEOUT=10
   WEBRCON_ENABLED=false
   ```

3. Настройте `.env` файл:
   - Замените `YOUR_DISCORD_BOT_TOKEN_HERE` на ваш токен Discord бота
   - При необходимости измените настройки RCON (хост, порт, пароль)
   - Если обычный RCON не работает, установите `WEBRCON_ENABLED=true` для принудительного использования WebRCON

## Запуск

```bash
python bot.py
```

## Функции

### Автоматическое подключение
Бот автоматически пытается подключиться к RCON серверу при запуске. 

**Логика подключения:**
1. Если `WEBRCON_ENABLED=true`, бот сначала попробует подключиться через WebRCON (использует тот же порт, что и RCON, но через WebSocket)
2. Затем пробует обычный RCON на портах: 27025, 27023, 27015
3. Если обычный RCON не сработал, автоматически пробует WebRCON как запасной вариант (использует порт из RCON_PORT)

### Команды бота

- `!rcon_test` - Тестирование RCON подключения
- `!rcon <команда>` - Выполнение RCON команды на сервере (например: `!rcon version`)
- `!rcon_reconnect` - Переподключение к RCON серверу
- `!rcon_status` - Проверка статуса текущего RCON подключения

## Примеры использования

```
!rcon_test
!rcon_status
!rcon version
!rcon serverinfo
!rcon_reconnect
```

## Примечания

- **Конфигурация хранится в `.env` файле** - не коммитьте этот файл в git!
- Бот автоматически пытается подключиться к RCON при запуске
- Поддержка **двух типов подключения**: обычный RCON и WebRCON (WebSocket)
- Если обычный RCON не работает, установите `WEBRCON_ENABLED=true` в `.env`
- Бот автоматически пробует WebRCON как запасной вариант, если обычный RCON не сработал
- Проверьте, что порты открыты и доступны
- Убедитесь, что RCON включен на Rust сервере
- Если возникают проблемы, проверьте логи бота для диагностики
- Используйте команду `!rcon_status` для проверки типа подключения (RCON или WebRCON)

